<!--
   Data Hub Service (DHuS) - For Space data distribution.
   Copyright (C) 2013,2014,2015 GAEL Systems

   This file is part of DHuS software sources.

   This program is free software: you can redistribute it and/or modify
   it under the terms of the GNU Affero General Public License as
   published by the Free Software Foundation, either version 3 of the
   License, or (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
   GNU Affero General Public License for more details.

   You should have received a copy of the GNU Affero General Public License
   along with this program. If not, see <http://www.gnu.org/licenses/>.
-->
<!DOCTYPE html>
<html>
<head>
	<style>		
		#resetPwd_div
		{
			display: none;
		}
		
		#resetPwd_panel
		{
			text-align: left;
			width: 630px;
		}
		
		.resetPwd_line
		{
		}
		
		.resetPwd_label
		{
			width: 100px;
			display:inline-block;
		}	
		
		.resetPwd_field
		{
			width: 200px;
			font-size: 12px;
			vertical-align: middle;
			font-family: "Trebuchet MS", Helvetica, sans-serif;	
			margin-bottom: 3px;
			margin-right: 5px;
			height: 16px;
		}
		
		#resetPwd_space
		{
			height: 15px;
		}
		
		#resetPwd_button_div
		{
			text-align: center;
		}
		
		#resetPwd_button
		{	
			font-size: 12px;
			text-align: center;
			width: 100px;
		}
	</style>
	<script>	
		var resetPwd_passwordConfirmFocused = false;	
				
		function activateSaveButton()
		{		
			var password = document.getElementById('resetPwd_password').value;
			var passwordConfirm = document.getElementById('resetPwd_password_confirm').value;
						
			if (password == null || password == "" || password != passwordConfirm)
			{		
				document.getElementById('resetPwd_button').className = "button_disabled";
			}
			else
			{
				document.getElementById('resetPwd_button').className = "button_black";
			}
		}
		
		function validateSavePassword()
		{
			var password = document.getElementById('resetPwd_password').value;
			var confirm = document.getElementById('resetPwd_password_confirm').value;
			
			if (!resetPwd_passwordConfirmFocused)
			{			
				if (password == null || password == "")
				{
				  document.getElementById('resetPwd_password').setCustomValidity('Password fields must be filled and equals');			  
				}
				else
				{
				  document.getElementById('resetPwd_password').setCustomValidity('');
				}	
			}
			else
			{
				if (password == null || password == "" || confirm != password)
				{
				  document.getElementById('resetPwd_password').setCustomValidity('Password fields must be filled and equals');
				  document.getElementById('resetPwd_password_confirm').setCustomValidity('Password fields must be filled and equals');			  
				}
				else
				{
				  document.getElementById('resetPwd_password').setCustomValidity('');
				  document.getElementById('resetPwd_password_confirm').setCustomValidity('');
				}	
			}					 
			activateSaveButton();
		}
		
		function validateSavePasswordConfirm()
		{
			resetPwd_passwordConfirmFocused = true;
			validateSavePassword();
		}
		
		function showReset()
		{
			document.getElementById("resetPwd_div").style.display = "block";
			document.getElementById("block_title").innerHTML = "<b>R</b>eset <b>P</b>assword";
		}
	</script>
</head>
<body>
	<div id="resetPwd_div">
	Please fill this form to receive your password by password.<br /><br />
	
	<center>
	<div id="resetPwd_panel">
		<div class="resetPwd_line">
			<div class="resetPwd_label">New password</div>
			<input type="password" name="resetPwd_password" id="resetPwd_password" class="resetPwd_field" 
				onkeyup="validateSavePassword()"/>
			<div class="resetPwd_label">Confirm it</div>
			<input type="password" name="resetPwd_password_confirm" id="resetPwd_password_confirm" 
				onkeyup="validateSavePasswordConfirm()" class="resetPwd_field" />
		</div>	
		<div id="resetPwd_space"></div>	
		<div id="resetPwd_button_div"><div class="button_disabled" id="resetPwd_button">Save password</div></div>
	</div>
	</center>
	</div>
</body>
</html>
